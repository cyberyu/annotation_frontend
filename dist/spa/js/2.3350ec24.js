(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1e5b":function(e,t,s){},"2da0":function(e,t,s){"use strict";s("1e5b")},"4baf":function(e,t,s){},"6ff6":function(e,t,s){"use strict";s("4baf")},"713b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"home","aria-label":"Menu"},on:{click:function(t){return e.$router.push("/")}}}),s("q-toolbar-title",{staticClass:"row"},[s("router-link",{staticClass:"main-link",attrs:{to:"/"}},[e._v("MIC")]),s("div",{staticClass:"col text-center"},[e._v(e._s(e.mode))])],1),e.isLoggedIn?s("q-btn-dropdown",{attrs:{color:"primary",label:"Welcome "+e.user.username}},[s("q-list",{attrs:{separator:""}},[s("q-item",{attrs:{clickable:"",ripple:"",href:e.$hostname+"/admin/",target:"_blank",tag:"a"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"admin_panel_settings"}})],1),s("q-item-section",[e._v("\n                Admin\n              ")])],1),s("q-item",{attrs:{clickable:"",ripple:""},on:{click:function(t){return e.logout()}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"logout"}})],1),s("q-item-section",[e._v("Logout")])],1)],1)],1):e._e()],1)],1),e.isLoggedIn?e._e():s("login"),e.isLoggedIn?s("q-page-container",[s("router-view",{on:{mode:function(t){e.mode=t}}})],1):e._e()],1)},r=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{staticClass:"column justify-center",attrs:{persistent:""},model:{value:e.notLoggedIn,callback:function(t){e.notLoggedIn=t},expression:"notLoggedIn"}},[s("q-card",{staticClass:"q-pa-sm",staticStyle:{width:"400px","max-width":"80vw"}},[s("q-toolbar",[s("q-toolbar-title",[e._v(" "+e._s("login"===e.mode?"Login":"Register")+" ")])],1),"login"===e.mode?s("q-form",{staticClass:"q-gutter-md",on:{submit:e.login}},[s("q-input",{attrs:{filled:"",label:"username",hint:"Please check up the username and password provided in our paper submission","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("q-input",{attrs:{filled:"",label:"password",type:"password","error-message":e.errorMsg,error:e.error,"lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",{staticClass:"column items-center q-mt-xs"},[s("q-btn",{staticClass:"col",attrs:{label:"Log In",type:"submit",color:"primary"}}),s("div",{staticClass:"row q-my-sm hidden"},[e._v("\n        No account yet? "),s("span",{staticClass:"register q-pl-xs",on:{click:function(t){e.mode="register"}}},[e._v(" Register")])])],1)],1):s("q-form",{staticClass:"q-gutter-md col-12",on:{submit:e.register}},[s("q-input",{attrs:{filled:"",label:"username",hint:"Usually your Vanguard username","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("q-input",{attrs:{filled:"",label:"password",type:"password","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}}),s("q-input",{attrs:{filled:"",label:"password confirmation",type:"password","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),s("div",{staticClass:"column items-center q-mt-xs"},[s("q-btn",{staticClass:"col",attrs:{label:"Register",type:"submit",color:"primary"}}),s("div",{staticClass:"row q-my-sm"},[e._v("\n          Already have an account? "),s("span",{staticClass:"register q-pl-xs",on:{click:function(t){e.mode="login"}}},[e._v(" Login ")])])],1)],1)],1)],1)},n=[],l={name:"Login",data(){return{username:null,password:null,password1:null,password2:null,mode:"login",notLoggedIn:!0,error:!1,errorMsg:null}},mounted(){this.$store.dispatch("auth/setCSRFToken")},methods:{login(){const e={username:this.username,password:this.password};this.$store.dispatch("auth/login",e).then((e=>{console.log("...",e.data.detail)})).catch((e=>{this.error=!0,this.errorMsg=e.response.data.detail}))},logout(){this.$store.dispatch("auth/logout")},register(){const e={username:this.username,password1:this.password1,password2:this.password2};this.$store.dispatch("auth/register",e)}},watch:{mode(){this.password=null,this.password1=null,this.password2=null,this.username=null},password(){this.error=!1},username(){this.error=!1}}},i=l,u=(s("6ff6"),s("2877")),c=s("24e8"),d=s("f09f"),m=s("65c6"),p=s("6ac5"),g=s("0378"),h=s("27f9"),f=s("9c40"),w=s("eebe"),b=s.n(w),q=Object(u["a"])(i,o,n,!1,null,"e03ce94c",null),v=q.exports;b()(q,"components",{QDialog:c["a"],QCard:d["a"],QToolbar:m["a"],QToolbarTitle:p["a"],QForm:g["a"],QInput:h["a"],QBtn:f["a"]});var y={name:"MainLayout",components:{Login:v},data(){return{mode:null,leftDrawerOpen:!1}},mounted(){},methods:{logout(){this.$store.dispatch("auth/logout")}},computed:{isLoggedIn(){return this.$store.getters["auth/authenticated"]},user(){return this.$store.getters["auth/user"]}}},_=y,Q=(s("2da0"),s("4d5a")),k=s("e359"),C=s("f20b"),L=s("1c1c"),x=s("66e5"),I=s("4074"),$=s("0016"),P=s("9404"),T=s("0170"),M=s("09e3"),z=Object(u["a"])(_,a,r,!1,null,null,null);t["default"]=z.exports;b()(z,"components",{QLayout:Q["a"],QHeader:k["a"],QToolbar:m["a"],QBtn:f["a"],QToolbarTitle:p["a"],QBtnDropdown:C["a"],QList:L["a"],QItem:x["a"],QItemSection:I["a"],QIcon:$["a"],QDrawer:P["a"],QItemLabel:T["a"],QPageContainer:M["a"]})}}]);